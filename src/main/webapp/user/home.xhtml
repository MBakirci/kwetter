<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
    <title>Kwetter Log In</title>
    <style type="text/css">
        .pagecontainer {
            margin-top: 60px;
        }

        .profilebox {
            width: 100%;
            background-color: #f5f8fa;
        }


        .tweet {
            height: 115px;
            width: 100%;
            padding-left: 20px;
            padding-top: 10px;
            background-color: #f5f8fa;
            border: solid 1px grey;
            border-width: 1px 1px 0 1px;
        }
    </style>
</h:head>
<h:body>
    <ui:include src="nav.xhtml" />
    <b:modal id="amodal" title="New Tweet" styleClass="modalPseudoClass">
        <h:form>
            <b:inputTextarea placeholder="Max 140 words" maxlength="140" value="#{userBean.tweetcontent}">
            </b:inputTextarea>
            <h:commandButton value="Tweet" action="#{userBean.createTweet()}">
                <f:ajax execute="@form" render="timelinetweets" />
            </h:commandButton>
        </h:form>
        <f:facet name="footer">
            <b:button value="close" dismiss="modal" onclick="return false;"/>
        </f:facet>
    </b:modal>
    <b:container styleClass="pagecontainer">
        <b:row>
            <b:column col-md="12">
                <div class="profilebox">

                    <b:row>
                        <b:column col-sm="12" style="margin-top: 9px;">
                            <strong>#{userBean.user.username}</strong>
                        </b:column>
                    </b:row>
                    <b:image value="http://lorempixel.com/200/200/people/" width="200px" height="200px" />
                    <b:row>
                        <b:column col-md="2">
                            <h6>Tweets
                                <br></br>
                                #{userBean.tweetsamount}
                            </h6>
                        </b:column>
                        <b:column col-md="2">
                            <h6>Followers
                                <br></br>
                                #{userBean.followersamount}
                            </h6>
                        </b:column>
                        <b:column col-md="2">
                            <h6>Following
                                <br></br>
                                #{userBean.followingamount}
                            </h6>
                        </b:column>
                        <b:column col-md="2">
                            <button id="btrigger" class="btn btn-primary" data-target="#amodal" data-toggle="modal">Add Tweet</button>
                        </b:column>
                    </b:row>
                </div>
            </b:column>
            <b:column col-md="6">

            </b:column>
            <b:column col-md="3">
                <div class="profilebox">
                </div>
            </b:column>
        </b:row>
        <b:row>
            <b:column col-md="12">
                <b:tabView activeIndex="0">
                    <b:tab title="Timeline" >
                        <h:panelGroup id="timelinetweets">
                            <ui:repeat var="tweet" value="#{userBean.timelinetweets}">

                                <div class="tweet">
                                    <b:row>
                                        <b:column col-md="9">
                                            <strong>#{tweet.user.username}</strong>
                                            @#{tweet.user.username} - #{tweet.timeAgo}
                                            <br></br>
                                            #{tweet.tweet}
                                        </b:column>
                                        <h:form>
                                            <b:icon name="heart" />  #{userBean.heartsamount}<br/>
                                        </h:form>
                                    </b:row>
                                </div>
                            </ui:repeat>
                        </h:panelGroup>
                    </b:tab>
                </b:tabView>
            </b:column>
        </b:row>

    </b:container>
</h:body>
</html>